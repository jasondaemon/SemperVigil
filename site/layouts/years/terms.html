{{ define "main" }}
  <header style="margin-bottom: 1rem;">
    <h1>Archive by Year</h1>
    <p>Select a year to view posts grouped by month.</p>
  </header>

  {{ partial "archive-nav.html" . }}

  {{- $tax := .Site.Taxonomies.years -}}
  {{ if not $tax }}
    <p><em>No year taxonomy terms found yet. Ensure posts have <code>years = ["YYYY"]</code> in frontmatter.</em></p>
  {{ else }}
    {{- $terms := slice -}}
    {{- range $k, $_ := $tax -}}
      {{- $terms = $terms | append $k -}}
    {{- end -}}
    {{- $terms = sort $terms "value" "desc" -}}

    <ul>
      {{- range $terms -}}
        {{- $term := . -}}
        {{- $p := index $tax $term -}}
        <li>
          <a href="{{ (printf "/years/%s/" $term) | relURL }}">{{ $term }}</a>
          <span style="opacity:.65;">({{ len $p.Pages }} posts)</span>
        </li>
      {{- end -}}
    </ul>
  {{ end }}
{{ end }}
