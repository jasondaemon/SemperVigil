# SemperVigil environment variables
# Copy to .env and adjust per host

# --- Core ---
SV_ENV=dev
SV_DATA_DIR=/data
SV_CONFIG_PATH=/config/config.yml
SV_LOG_LEVEL=INFO

# --- Permissions / NFS ---
SV_UID=1000
SV_GID=1000
SV_UMASK=002

# --- Ports ---
# Public web port (nginx serving Hugo output)
SV_WEB_PORT=18080

# Admin API host port (loopback by default in compose)
SV_ADMIN_PORT=8001

# --- OpenAI (optional; leave blank to disable) ---
OPENAI_API_KEY=
SV_LLM_PROVIDER=openai
SV_OPENAI_MODEL=gpt-4o-mini
SV_OPENAI_TEMPERATURE=0.2
SV_OPENAI_MAX_TOKENS=400

# --- NVD (optional) ---
NVD_API_KEY=

# --- Ingest behavior ---
SV_HTTP_TIMEOUT_SECONDS=20
SV_HTTP_USER_AGENT=SemperVigil/0.1 (+https://github.com/jasondaemon/SemperVigil)

# Default ingest cadence (minutes)
SV_INGEST_DEFAULT_INTERVAL_MINUTES=60

# Pause source after N consecutive failures
SV_SOURCE_FAILURE_THRESHOLD=5

# --- Storage ---
# SQLite busy timeout (ms)
SV_SQLITE_BUSY_TIMEOUT_MS=5000

# --- Hugo ---
SV_HUGO_SITE_DIR=/site
SV_HUGO_BASEURL=http://localhost:18080/

# Hugo builds are run on-demand:
#   docker compose --profile build run --rm builder

# --- Filesystem notes ---
# Requires NFS mount compatible with non-root containers:
#   vers=3,noatime,nolock
# SV_UID/SV_GID must match ownership of ./data and ./site
