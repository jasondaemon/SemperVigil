{% set nav_active = "content" %}
{% set nav_subactive = "events" %}
{% extends "admin/base.html" %}

{% block content %}
<section class="page">
  <div class="page-header">
    <h1>Event Detail</h1>
  </div>
  <div id="event-detail" data-event-id="{{ event_id }}">
    <div class="loading">Loading event...</div>
  </div>
  <div class="panel">
    <div class="panel-header">
      <h2>Actions</h2>
    </div>
    <div class="actions">
      <button class="btn secondary" type="button" id="event-summary-refresh">Rebuild Summary</button>
      <input class="input" type="number" id="event-attach-article-id" placeholder="Article ID">
      <button class="btn secondary" type="button" id="event-attach-article">Attach Article</button>
    </div>
  </div>
  <div class="panel">
    <div class="panel-header"><h2>CVEs</h2></div>
    <table class="table" id="event-cves-table">
      <thead>
        <tr>
          <th>CVE</th>
          <th>Severity</th>
          <th>Score</th>
          <th>Published</th>
          <th>Summary</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <div class="panel">
    <div class="panel-header"><h2>Products</h2></div>
    <ul id="event-products-list" class="list"></ul>
  </div>
  <div class="panel">
    <div class="panel-header"><h2>Articles</h2></div>
    <table class="table" id="event-articles-table">
      <thead>
        <tr>
          <th>Article</th>
          <th>Published</th>
          <th>Source</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <div class="panel">
    <div class="panel-header">
      <h2>Web Enrichment</h2>
    </div>
    <div class="filters inline">
      <input class="input" type="text" id="event-web-query" placeholder="Search query (optional override)">
      <label class="checkbox"><input type="checkbox" id="event-web-keep-low"> Keep low score</label>
      <label class="checkbox"><input type="checkbox" id="event-web-promote"> Auto-promote</label>
      <button class="btn secondary" type="button" id="event-web-search">Search Web</button>
    </div>
    <div class="filters inline">
      <label class="checkbox"><input type="checkbox" id="event-web-show-discarded"> Show discarded</label>
      <label class="checkbox"><input type="checkbox" id="event-web-show-low"> Show low score</label>
    </div>
    <div id="event-web-error" class="error-banner" style="display:none;"></div>
    <table class="table-compact" id="event-web-sources-table">
      <thead>
        <tr>
          <th>Score</th>
          <th>Domain</th>
          <th>Published</th>
          <th>Title</th>
          <th>Snippet</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</section>
{% endblock %}
